#!/usr/bin/env bash

# Backup the original /etc/hosts file
sudo cp /etc/hosts /etc/hosts.backup

# Modify /etc/hosts to make localhost resolve to 127.0.0.2
# and facebook.com resolve to 8.8.8.8
sudo sed -i 's/127.0.0.1\s*localhost/127.0.0.2 localhost/' /etc/hosts

# Check if facebook.com is already in /etc/hosts, if so, replace it
if grep -q "facebook.com" /etc/hosts; then
    sudo sed -i 's/.*facebook.com.*/8.8.8.8 facebook.com/' /etc/hosts
else
    # If facebook.com is not found, append it
    echo "8.8.8.8 facebook.com" | sudo tee -a /etc/hosts > /dev/null
fi

echo "Host file updated. Please note that localhost is now resolving to 127.0.0.2."
